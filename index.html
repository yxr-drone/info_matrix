<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ…æŠ¥çŸ©é˜µ | Intelligence Matrix</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --text-sub: #64748b;
        }
        /* æ–°å¢ Tag æ ·å¼ */
        .tag {
            display: inline-block;
            padding: 2px 8px;
            background: #e2e8f0;
            color: #475569;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-right: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tag:hover { background: var(--primary-color); color: white; }
        .tag.active { background: var(--primary-color); color: white; }
        
        .sidebar {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        /* ä¾§è¾¹æ  */
        .sidebar {
            width: 260px;
            background: #1e293b;
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        .sidebar h2 { font-size: 1.2rem; margin-bottom: 30px; border-bottom: 1px solid #334155; padding-bottom: 15px; }
        .nav-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .nav-item:hover { background: #334155; }
        .nav-item.active { background: var(--primary-color); }
        
        /* ä¸»å†…å®¹åŒº */
        .main-content {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        header {
            padding: 20px 40px;
            background: white;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .search-bar {
            width: 400px;
            padding: 10px 20px;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            outline: none;
        }
        .feed { padding: 40px; max-width: 900px; margin: 0 auto; width: 100%; }
        
        /* æƒ…æŠ¥å¡ç‰‡ */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-2px); }
        .card-header { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .author-tag { font-weight: bold; color: var(--primary-color); }
        .date-tag { color: var(--text-sub); font-size: 0.9rem; }
        .title { font-size: 1.4rem; font-weight: 800; margin-bottom: 15px; color: var(--text-main); }
        .lang-block { margin-bottom: 15px; line-height: 1.6; }
        .lang-en { font-style: italic; color: var(--text-sub); border-left: 3px solid #e2e8f0; padding-left: 15px; margin-bottom: 10px; }
        .lang-zh { color: var(--text-main); font-size: 1.1rem; }
        .media-container img { width: 100%; border-radius: 12px; margin: 15px 0; border: 1px solid #eee; }
        .links { margin-top: 15px; }
        .links a { color: var(--primary-color); text-decoration: none; font-size: 0.9rem; margin-right: 15px; }
        .links a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>æƒ…æŠ¥çŸ©é˜µ <span style="font-size: 0.7rem; opacity: 0.6;">v2.0</span></h2>
        <div class="nav-item active" onclick="switchAuthor('All')">ğŸŒ å…¨éƒ¨æµ</div>
        <div class="nav-item" onclick="switchAuthor('Andrej Karpathy')">ğŸ§  Andrej Karpathy</div>
        <div class="nav-item" onclick="switchAuthor('Fei-Fei Li')">ğŸ‘ï¸ æé£é£ (Fei-Fei Li)</div>
        <div style="margin-top: auto; font-size: 0.8rem; opacity: 0.5;">
            åå°é‡‡é›†å™¨: è¿è¡Œä¸­ (æ¯10min)
        </div>
    </div>
    
    <div class="main-content">
        <header>
            <div id="author-title">ğŸ“‚ å…¨éƒ¨æƒ…æŠ¥æµ</div>
            <div class="sort-controls" style="display: flex; gap: 10px;">
                <button id="sort-latest" class="active" onclick="setSort('latest')">æœ€æ–°å‘å¸ƒ</button>
                <button id="sort-oldest" onclick="setSort('oldest')">æœ€æ—©è¿½æº¯</button>
                <button id="sort-hot" onclick="setSort('hot')">ğŸ”¥ çƒ­åº¦</button>
            </div>
            <input type="text" class="search-bar" placeholder="æœç´¢å…¨çƒå¤§ç‰›çš„æ™ºæ…§..." oninput="search(this.value)">
        </header>
        
        <div class="feed" id="matrix-feed">
            <!-- åŠ¨æ€åŠ è½½å†…å®¹ -->
        </div>
    </div>

    <!-- å¼•ç”¨ç‹¬ç«‹æ•°æ®æº -->
    <script src="matrix_data.js"></script>
    <script>
        // ... åŸæœ‰çš„ JS é€»è¾‘ï¼Œä½†åˆ æ‰ç¡¬ç¼–ç çš„ matrixData

        let currentAuthor = 'All';

        let currentSort = 'latest';
        let activeTag = null;

        function render(data) {
            const feed = document.getElementById('matrix-feed');
            
            // ç»¼åˆè¿‡æ»¤ï¼šäººç‰© + æ ‡ç­¾
            let filteredData = data.filter(d => {
                const authorMatch = (currentAuthor === 'All' || d.author === currentAuthor);
                const tagMatch = (!activeTag || (d.tags && d.tags.includes(activeTag)));
                return authorMatch && tagMatch;
            });

            // ç»¼åˆæ’åº
            const sortMode = document.querySelector('.sort-controls .active')?.id || 'sort-latest';
            if (sortMode === 'sort-latest') {
                filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
            } else if (sortMode === 'sort-oldest') {
                filteredData.sort((a, b) => new Date(a.date) - new Date(b.date));
            }

            feed.innerHTML = filteredData.map(item => `
                <div class="card">
                    <div class="card-header">
                        <span class="author-tag">${item.author}</span>
                        <div>
                            ${item.tags ? item.tags.map(t => `<span class="tag" onclick="filterByTag('${t}')">${t}</span>`).join('') : ''}
                            <span class="date-tag">${item.date}</span>
                        </div>
                    </div>
                    ${item.title ? `<div class="title">${item.title}</div>` : ''}
                    <div class="lang-block">
                        <div class="lang-en">${item.original}</div>
                        <div class="lang-zh">${item.translation}</div>
                    </div>
                    ${item.media && item.media.length > 0 ? `
                    <div class="media-container">
                        ${item.media.map(m => `<img src="${m}" onerror="this.style.display='none'">`).join('')}
                    </div>` : ''}
                    <div class="links">
                        <a href="${item.url}" target="_blank">ğŸ”— è®¿é—®åŸæ–‡</a>
                        ${item.links ? item.links.map(l => `<a href="${l}" target="_blank">ğŸ“„ ç›¸å…³æ–‡æ¡£</a>`).join('') : ''}
                    </div>
                </div>
            `).join('');
        }

        function setSort(mode) {
            document.querySelectorAll('.sort-controls button').forEach(btn => {
                btn.classList.toggle('active', btn.id === `sort-${mode}`);
            });
            switchAuthor(currentAuthor); // é‡æ–°è§¦å‘æ¸²æŸ“
        }

        function filterByTag(tag) {
            activeTag = (activeTag === tag) ? null : tag;
            // æ›´æ–° UI æ ·å¼ï¼ˆåç»­å¯åŠ åˆ° render ä¸­ï¼‰
            switchAuthor(currentAuthor);
        }

        function switchAuthor(author) {
            currentAuthor = author;
            document.getElementById('author-title').innerText = author === 'All' ? 'ğŸ“‚ å…¨éƒ¨æƒ…æŠ¥' : `ğŸ“‚ ${author}`;
            const filtered = author === 'All' ? matrixData : matrixData.filter(d => d.author === author);
            render(filtered);
        }

        function search(val) {
            const q = val.toLowerCase();
            const filtered = matrixData.filter(d => 
                d.original.toLowerCase().includes(q) || 
                d.translation.toLowerCase().includes(q) ||
                d.author.toLowerCase().includes(q)
            );
            render(filtered);
        }

        // åˆå§‹åŒ–
        window.onload = () => switchAuthor('All');
    </script>
</body>
</html>